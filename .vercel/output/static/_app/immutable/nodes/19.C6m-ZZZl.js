import{f as p,a as n}from"../chunks/DbI-BAT7.js";import{p as I,k as J,s as m,f as K,a as L,$ as M,c,r as u,d as P,t as Q,h as f,g as r,b as R}from"../chunks/DpahKekj.js";import{s as B}from"../chunks/VvQGwHW7.js";import{i as A}from"../chunks/btn1nWV7.js";import{h as U}from"../chunks/CY1QkmDl.js";import{d as W}from"../chunks/BoqBtSLs.js";import{s as V}from"../chunks/BAvt4X04.js";import{s as X,a as Z}from"../chunks/DLgYKsuH.js";import{p as aa}from"../chunks/D4S3zOKG.js";import{S as sa}from"../chunks/70WdruOn.js";const ea=(x,o,l,i,w,y,a)=>{r(o,!0),r(l,"Sending...");let d=i==null?void 0:i.email;d&&w.auth.resetPasswordForEmail(d,{redirectTo:`${y().url.origin}/auth/callback?next=%2Faccount%2Fsettings%2Freset_password`}).then(v=>{r(a,!v.error,!0),r(o,!1),r(l,"Send Forgot Password Email")})};var ta=p(`<div class="font-bold">Set Password By Email</div> <div>You use oAuth to sign in ("Sign in with Github" or similar). You can
          continue to access your account using only oAuth if you like!</div>`,1),oa=p('<div class="font-bold">Change Password By Email</div>'),ia=p(`<div class="card p-6 pb-7 mt-8 max-w-xl flex flex-col md:flex-row shadow-sm max-w-md"><div class="flex flex-col gap-y-4"><!> <div> </div> <button> </button> <div>Sent email! Please check your inbox and use the link to set your
        password.</div></div></div>`),ra=p('<h1 class="text-2xl font-bold mb-6">Change Password</h1> <!>',1);function ha(x,o){var T,$;I(o,!0);const l=()=>Z(aa,"$page",i),[i,w]=X();J("adminSection").set("settings");let{user:a,supabase:d}=o.data,v=!!((T=a==null?void 0:a.amr)!=null&&T.find(s=>s.method==="password")),N=!!(($=a==null?void 0:a.amr)!=null&&$.find(s=>s.method==="oauth")),S=P(!1),C=P("Send Set Password Email"),h=P(!1);var k=ra();U(s=>{M.title="Change Password"});var O=m(K(k),2);{var Y=s=>{sa(s,{title:"Change Password",editable:!0,saveButtonTitle:"Change Password",successTitle:"Password Changed",successBody:"On next sign in, use your new password.",formTarget:"/account/api?/updatePassword",fields:[{id:"newPassword1",label:"New Password",initialValue:"",inputType:"password"},{id:"newPassword2",label:"Confirm New Password",initialValue:"",inputType:"password"},{id:"currentPassword",label:"Current Password",initialValue:"",inputType:"password"}]})},G=s=>{var g=ia(),E=c(g),F=c(E);{var j=t=>{var _=ta();R(2),n(t,_)},q=t=>{var _=oa();n(t,_)};A(F,t=>{N?t(j):t(q,!1)})}var b=m(F,2),z=c(b);u(b);var e=m(b,2);e.__click=[ea,S,C,a,d,l,h];var D=c(e,!0);u(e);var H=m(e,2);u(E),u(g),Q(()=>{B(z,`The button below will send you an email at ${(a==null?void 0:a.email)??""} which will allow
        you to set your password.`),V(e,1,`btn btn-outline btn-wide ${f(h)?"hidden":""}`),e.disabled=f(S),B(D,f(C)),V(H,1,`success alert alert-success ${f(h)?"":"hidden"}`)}),n(s,g)};A(O,s=>{v?s(Y):s(G,!1)})}n(x,k),L(),w()}W(["click"]);export{ha as component};
