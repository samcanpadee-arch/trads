import{f as h,a as v,t as V}from"../chunks/DbI-BAT7.js";import"../chunks/eNEize8k.js";import{p as X,t as b,h as t,a as Y,$ as Z,s as d,c as l,m as _,g as r,v as ee,r as o,w as te,b as ae}from"../chunks/DpahKekj.js";import{s as w}from"../chunks/VvQGwHW7.js";import{i as K}from"../chunks/btn1nWV7.js";import{e as H,i as O}from"../chunks/B9aOS7PH.js";import{h as se}from"../chunks/CY1QkmDl.js";import{e as M}from"../chunks/BoqBtSLs.js";import{s as re}from"../chunks/BAvt4X04.js";import{b as oe}from"../chunks/Cm5o7Fn9.js";import{b as le}from"../chunks/CiKuUkrW.js";import{p as ie}from"../chunks/CWmzcjye.js";import{i as ne}from"../chunks/DqZOa1AM.js";var de=h("<option> </option>"),ce=h('<div><div class="chat-bubble whitespace-pre-wrap"> </div></div>'),ve=h('<div class="chat chat-start"><div class="chat-bubble"> <span class="loading loading-dots loading-xs align-middle ml-2"></span></div></div>'),me=h('<div class="mt-3 alert alert-error"><span> </span></div>'),pe=h('<span class="loading loading-spinner"></span>'),fe=h('<div class="flex flex-col h-full"><div class="mb-3 flex items-center gap-3"><h1 class="text-2xl font-bold">Chat</h1> <div class="ml-auto flex items-center gap-2"><label class="text-sm opacity-80" for="modelSelect">Model</label> <select id="modelSelect" class="select select-bordered select-sm"></select> <button class="btn btn-ghost btn-sm">Clear</button></div></div> <div class="flex-1 overflow-y-auto space-y-4 p-4 rounded bg-base-200"><!> <!></div> <!> <form class="mt-4 flex gap-2"><textarea class="textarea textarea-bordered flex-1 min-h-[48px]" placeholder="Ask me anything… (Ctrl/Cmd+Enter to send)"></textarea> <button class="btn btn-primary"><!></button></form></div>');function Ke(j,F){X(F,!1);let c=_([{role:"assistant",content:"Hi! I'm your AI helper. How can I help today?"}]);const N=[{id:"gpt-4o-mini",label:"Fast"},{id:"gpt-4o",label:"Best"}];let g=_(N[0].id),m=_(""),i=_(!1),p=_(""),f=_(null);async function T(e){if(e==null||e.preventDefault(),!t(m).trim()||t(i))return;r(f,null),r(c,[...t(c),{role:"user",content:t(m)}]);const s={messages:t(c),model:t(g)};r(m,""),r(i,!0),r(p,"");try{const a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok||!a.body){r(f,await a.text()),r(i,!1);return}const n=a.body.getReader(),u=new TextDecoder;for(;;){const{value:Q,done:U}=await n.read();if(U)break;r(p,t(p)+u.decode(Q,{stream:!0}))}r(c,[...t(c),{role:"assistant",content:t(p)}])}catch(a){r(f,(a==null?void 0:a.message)??"Network error")}finally{r(i,!1)}}function J(){r(c,[{role:"assistant",content:"New chat. What’s up?"}]),r(f,null),r(p,"")}function P(e){(e.metaKey||e.ctrlKey)&&e.key==="Enter"&&T()}ne();var k=fe();se(e=>{Z.title="Chat"});var C=l(k),$=d(l(C),2),x=d(l($),2);b(()=>{t(g),ee(()=>{t(i)})}),H(x,5,()=>N,O,(e,s)=>{var a=de(),n=l(a,!0);o(a);var u={};b(()=>{w(n,t(s).label),u!==(u=t(s).id)&&(a.value=(a.__value=t(s).id)??"")}),v(e,a)}),o(x);var A=d(x,2);o($),o(C);var S=d(C,2),B=l(S);H(B,1,()=>t(c),O,(e,s)=>{var a=ce(),n=l(a),u=l(n,!0);o(n),o(a),b(()=>{re(a,1,`chat ${t(s).role==="user"?"chat-end":"chat-start"}`),w(u,t(s).content)}),v(e,a)});var R=d(B,2);{var W=e=>{var s=ve(),a=l(s),n=l(a,!0);ae(),o(a),o(s),b(()=>w(n,t(p))),v(e,s)};K(R,e=>{t(i)&&e(W)})}o(S);var E=d(S,2);{var q=e=>{var s=me(),a=l(s),n=l(a,!0);o(a),o(s),b(()=>w(n,t(f))),v(e,s)};K(E,e=>{t(f)&&e(q)})}var D=d(E,2),y=l(D);te(y);var I=d(y,2),z=l(I);{var G=e=>{var s=pe();v(e,s)},L=e=>{var s=V("Send");v(e,s)};K(z,e=>{t(i)?e(G):e(L,!1)})}o(I),o(D),o(k),b(e=>{x.disabled=t(i),A.disabled=t(i),I.disabled=e},[()=>t(i)||!t(m).trim()]),oe(x,()=>t(g),e=>r(g,e)),M("click",A,J),le(y,()=>t(m),e=>r(m,e)),M("keydown",y,P),M("submit",D,ie(T)),v(j,k),Y()}export{Ke as component};
